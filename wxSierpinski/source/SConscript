import string
import os

MYARCH = os.uname()[4]

COMMON_SOURCES = [ ]
TARGETS = {
    'wxSierpinski' : [
        'control_panel.cpp',
        'frontend.cpp',
        'glpanel.cpp',
        'mainframe.cpp',
        'sdlpanel.cpp',
        'scenethread.cpp',
        'sdlthread.cpp',
    ]
}
INCLUDE_DIRS = [
    '#/libsierp/include',
]
LIBS = [
    'sierp',
    'm',
    'GL',
    'GLU',
]
LIB_DIRS = [
    '../source',
    '../../libsierp/source',
]

# You shouldn't need to modify below this line.

Import('amenv')
menv = amenv.Copy()

#### Section for wxWidgets
menv.Append(CCFLAGS=['-DwxUSE_GLCANVAS=1'])
menv.ParseConfig('wx-config --cflags --libs --gl-libs')
#### 

menv.Append(CPPPATH=INCLUDE_DIRS)
menv.Append(LIBS=LIBS, LIBPATH=LIB_DIRS)

for target in TARGETS.keys():
    #
    # Only perform build on host's architecture
    #
    if( string.find(menv.WORKING_BUILD_TYPE, MYARCH ) >= 0 ):
        sources = TARGETS[target]
        menv.Program(target, sources)
        menv.Install(target)

